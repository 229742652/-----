(function(){function l(n){if(n&&n instanceof Object){var t=n.callback||null,r=n.args||[],u=n.context||null,i=n.delay||-1;t&&t instanceof Function&&(typeof i=="number"&&i>=0?setTimeout(function(){t.call(u,r)},i):t.call(u,r))}}function i(n,t){if(n&&n instanceof Object){var i=n.args||[];n.args=t.concat(i)}l(n)}function t(n,i){i=i||0;!0===window.G_WEIXIN_READY||"WeixinJSBridge"in window?n.apply(null,[]):i<=2e3&&setTimeout(function(){t(n,i++)},15)}var n,u,r,h;for(document.addEventListener("WeixinJSBridgeReady",function(){window.G_WEIXIN_READY=!0},!1),window.WEIXIN_API=_api={Share:{weibo:function(n,r){t(function(){WeixinJSBridge.on("menu:share:weibo",function(){WeixinJSBridge.invoke("shareWeibo",n,function(n){i(r,[n])})})})},timeline:function(n,r){t(function(){WeixinJSBridge.on("menu:share:timeline",function(){WeixinJSBridge.invoke("shareTimeline",n,function(n){i(r,[n])})})})},message:function(n,r){t(function(){WeixinJSBridge.on("menu:share:appmessage",function(){WeixinJSBridge.invoke("sendAppMessage",n,function(n){i(r,[n])})})})}},setToolbar:function(n,r){t(function(){!0===n?WeixinJSBridge.call("showToolbar"):WeixinJSBridge.call("hideToolbar");i(r,[n])})},setOptionMenu:function(n,r){t(function(){!0===n?WeixinJSBridge.call("showOptionMenu"):WeixinJSBridge.call("hideOptionMenu");i(r,[n])})},pay:function(n,r){t(function(){var u={appId:"",timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""},t=r||{},f=null,o=[n];for(var e in u)u.hasOwnProperty(e)&&(u[e]=n[e]||"",console.info(e+" = "+u[e]));WeixinJSBridge.invoke("getBrandWCPayRequest",u,function(n){var r="get_brand_wcpay_request:";switch(n.err_msg){case r+"ok":f=t.success;break;case r+"fail":f=t.fail||t.error;break;case r+"cancel":f=t.cancel||t.error;break;default:f=t.error}i(f,o)})})}},u=document.getElementsByTagName("meta"),r=0,h=u.length;r<h;r++)u[r].getAttribute("name")=="sharecontent"&&(n=u[r]);if(n){var c=window.location.href,f={img_url:n.dataset.msgImg||"http://"+window.location.host+document.getElementsByTagName("img")[0].getAttribute("src"),link:c,desc:n.dataset.msgContent||document.title+"，敬请访问！",title:n.dataset.msgTitle||document.title},o={urlCall:n.dataset.msgCallback||"",callback:function(n){n[0].err_msg.indexOf("cancel")==-1&&(window.BI_weixin?(f.link=BI_weixin.save_openid_uid(f),BI_weixin.wxcallback(f)):s.urlCall&&(window.location.href=o.urlCall))}},e={img_url:n.dataset.lineImg||"http://"+window.location.host+document.getElementsByTagName("img")[0].getAttribute("src"),link:c,desc:n.dataset.lineTitle||document.title+"，敬请访问！",title:n.dataset.lineTitle||document.title+"，敬请访问！"},s={urlCall:n.dataset.lineCallback||"",callback:function(n){n[0].err_msg.indexOf("cancel")==-1&&(window.BI_weixin?(e.link=BI_weixin.save_openid_uid(e),BI_weixin.wxcallback(e)):s.urlCall&&(window.location.href=o.urlCall))}};_api.Share.message(f,o);_api.Share.timeline(e,s)}})();
/*
//# sourceMappingURL=weixinshare.min.js.map
*/