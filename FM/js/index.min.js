$(function(){function f(t){n.found.find("nav li").removeClass("active");n.found.find("nav li").eq(t).addClass("active")}function e(t){n.bannerLine.removeClass("active");n.bannerLine.eq(t).addClass("active")}function s(){r++;r>n.bannerLen-1&&(r=0);e(r);n.banner.css("-webkit-transform","translate3d(-"+r*n.iWidth+"px,0,0)").css("-webkit-transition","500ms -webkit-transform ease-in-out")}function h(t,i){n.found.find(".port .bigBanner").width(t*n.found.find("nav li").size()).find(".banner_item").width(n.iWidth).height(n.iHeight-155);n.found.find(".port .bigBanner li").width(t);n.banner.find("li").width(t);n.banner.width(t*n.bannerLen);n.audioList.find(".list_port").height(i-70)}function o(n,t){return arguments.length===1?(n.css("-webkit-transform","translate3d(0,0,0)"),n.css("transform","translate3d(0,0,0)")):(n.css("-webkit-transform","translate3d("+t[0]+","+t[1]+","+t[2]+")"),n.css("transform","translate3d("+t[0]+","+t[1]+","+t[2]+")")),n}function c(){var t=document.createElement("canvas"),i=t.getContext("2d");t.width=n.iWidth;t.height=n.iHeight;i.stackBlurImage("images/jingxuan/news/1.jpg",100,!1,function(){n.audioList.css({background:"url("+t.toDataURL()+")"})})}function o(n,t){return arguments.length===1?(n.css("-webkit-transform","translate3d(0,0,0)"),n.css("transform","translate3d(0,0,0)")):(n.css("-webkit-transform","translate3d("+t[0]+","+t[1]+","+t[2]+")"),n.css("transform","translate3d("+t[0]+","+t[1]+","+t[2]+")")),n}var n={iWidth:document.documentElement.clientWidth,iHeight:document.documentElement.clientHeight,header:$("#header"),block:$(".block"),user:$("#user"),found:$("#found"),downLoad:$("#download"),search:$("#search"),banner:$("#found .port .banner ol"),timer:null,bannerLen:$("#found .port .banner ol li").size(),bannerLine:$("#found .port .banner_line div"),detailBtn:$("#footer .detail"),playBtn:$("#play"),nextBtn:$("#footer .next"),music_anim:$("#footer .music_anim"),audio:$("#audio"),footer:$("#footer"),process:$("#footer .process span"),list:$("#list"),audioName:$("#footer .title section"),audioList:$("#audio_list")},r,t,i,u;$(document).on("touchmove",function(n){n.preventDefault()});n.header.tap(function(t){var i=$(t.target).parent().index();n.header.find("li").removeClass("active");n.header.find("li").eq(i).addClass("active");n.block.hide();n.block.eq(i).show()});n.found.find("nav").tap(function(t){if(t.target.nodeName==="LI"){var i=$(t.target).index();f(i);n.found.find(".port .bigBanner").dragSwipe({max:.2,iNow:i,fnComplate:function(n){f(n)}})}});window.navChange=f;h(n.iWidth,n.iHeight);r=0;n.banner.dragSwipe({fnComplate:function(n){e(n)},iNow:r}).on("touchstart",function(){n.banner.css("-webkit-transition","none");clearInterval(n.timer);n.timer=null}).on("touchend",function(){setTimeout(function(){n.timer===null&&(n.timer=setInterval(function(){s(r);n.banner.dragSwipe({iNow:r,isOff:!0,fnComplate:function(n){e(n)}})},3e3))},3e3)});n.timer===null&&(n.timer=setInterval(function(){s(r)},3e3));t=document.createElement("canvas");i=t.getContext("2d");i.drawDetail("#fff");n.detailBtn.find("section").css("background","url("+t.toDataURL()+")");i.clearRect(0,0,t.width,t.height);i.audioPause();n.playBtn.find("section").css("background","url("+t.toDataURL()+")");i.clearRect(0,0,t.width,t.height);i.audioNext();n.nextBtn.find("section").css("background","url("+t.toDataURL()+")");u=!0;n.playBtn.tap(function(r,f){u?(i.clearRect(0,0,t.width,t.height),i.audioPlay(),n.playBtn.find("section").css("background","url("+t.toDataURL()+")"),n.music_anim.addClass("played").removeClass("pause"),n.audio[0].play()):(i.clearRect(0,0,t.width,t.height),i.audioPause(),$(f).find("section").css("background","url("+t.toDataURL()+")"),n.music_anim.addClass("pause").removeClass("played"),n.audio[0].pause());u=!u});n.audio.on("play",function(){n.audio[0].totleTime=n.audio[0].duration*1;i.clearRect(0,0,t.width,t.height);i.audioPlay();n.playBtn.find("section").css("background","url("+t.toDataURL()+")");n.music_anim.addClass("played").removeClass("pause")}).on("pause",function(){i.clearRect(0,0,t.width,t.height);i.audioPause();n.playBtn.find("section").css("background","url("+t.toDataURL()+")");n.music_anim.addClass("pause").removeClass("played")}).on("end",function(){i.clearRect(0,0,t.width,t.height);i.audioPause();n.playBtn.find("section").css("background","url("+t.toDataURL()+")");n.music_anim.addClass("pause").removeClass("played");u=!u}).on("timeupdate",function(){var t=n.audio[0].currentTime*1;o(n.process,[parseInt(t/(n.audio[0].totleTime*1)*100-100)+"%",0,0])}).on("loadedmetadata",function(){n.audio[0].totleTime=n.audio[0].duration*1}).on("seeking",function(){}).on("seeked",function(){}).on("canplaythrough",function(){}).on("waiting",function(){});n.list.tap(function(t){t.target.nodeName==="IMG"&&$(t.target).data("audiosrc")!==undefined&&(n.audio[0].pause(),n.audio.attr("src",$(t.target).data("audiosrc")),n.audio[0].play(),n.audioName.html($(t.target).data("name")))});c();n.footer.find(".detail").tap(function(){o(n.audioList)});n.audioList.tap(function(t){t.target.className.indexOf("close")>-1&&o(n.audioList,[0,"100%",0])})}),function(){function f(){setTimeout(function(){for(var r,t=document.getElementById("thelist"),n=0;n<3;n++)r=document.createElement("li"),r.innerHTML='<p class="title">宋小宝搞笑大全《中奖了》'+n+'<\/p><p class="timeline">时长：<span>49分3秒<\/span><\/p>',t.insertBefore(r,t.childNodes[0]);i.refresh()},1e3)}function e(){setTimeout(function(){for(var r,t=document.getElementById("thelist"),n=0;n<3;n++)r=document.createElement("li"),r.innerHTML='<p class="title">宋小宝搞笑大全《中奖了》'+n+'<\/p><p class="timeline">时长：<span>40分3秒<\/span><\/p>',t.appendChild(r,t.childNodes[0]);i.refresh()},1e3)}function o(){n=document.getElementById("pullDown");r=n.offsetHeight;t=document.getElementById("pullUp");u=t.offsetHeight;i=new iScroll("list_port",{scrollbarClass:"myScrollbar",useTransition:!1,topOffset:r,onRefresh:function(){n.className.match("loading")?(n.className="",n.querySelector(".pullDownLabel").innerHTML="下拉刷新..."):t.className.match("loading")&&(t.className="",t.querySelector(".pullUpLabel").innerHTML="上拉加载更多...")},onScrollMove:function(){this.y>5&&!n.className.match("flip")?(n.className="flip",n.querySelector(".pullDownLabel").innerHTML="松手开始更新...",this.minScrollY=0):this.y<5&&n.className.match("flip")?(n.className="",n.querySelector(".pullDownLabel").innerHTML="下拉刷新...",this.minScrollY=-r):this.y<this.maxScrollY-5&&!t.className.match("flip")?(t.className="flip",t.querySelector(".pullUpLabel").innerHTML="松手开始更新...",this.maxScrollY=this.maxScrollY):this.y>this.maxScrollY+5&&t.className.match("flip")&&(t.className="",t.querySelector(".pullUpLabel").innerHTML="上拉加载更多...",this.maxScrollY=u)},onScrollEnd:function(){n.className.match("flip")?(n.className="loading",n.querySelector(".pullDownLabel").innerHTML="加载中...",f()):t.className.match("flip")&&(t.className="loading",t.querySelector(".pullUpLabel").innerHTML="加载中...",e())}});setTimeout(function(){document.getElementById("list_port").style.left="0"},800)}var i,n,r,t,u;document.addEventListener("touchmove",function(n){n.preventDefault()},!1);window.addEventListener("load",o,!1)}(),function(){function t(){n=new iScroll("port_wrapper",{snap:!0,momentum:!1,hScrollbar:!1,onScrollMove:function(){return!1},onScrollEnd:function(){navChange(this.currPageX)},onScrollStart:function(){}})}var n;document.addEventListener("DOMContentLoaded",t,!1)}();
/*
//# sourceMappingURL=index.min.js.map
*/